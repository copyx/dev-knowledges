# The Practice of Programming

> by 브라이언 W. 커니핸 & 롭 파이크

# 1. Style

프로그래밍 스타일의 기반은 일반적인 상식(Not 임의적인 규칙). 널리 사용되고 있는 관례를 따르는 것이 제일 좋음. 단, 세부사항은 팀에 의해 정해질 수 있음.

코드는 간단명료해야 함.

- 직관적인 논리
- 자연스러운 표현
- 일반적인 언어의 사용
- 의미있는 이름
- 깔끔한 형식
- 쓸모있는 주석

편법이나 비일반적인 구조는 피해야 함.

## 1.1 이름

변수나 함수의 이름은 목적에 관한 정보를 전달함과 동시에 간결하고 기억하기 쉬워야 하며 가능하다면 발음할 수 있어야함.

### 전역변수는 서술적인 이름, 지역변수는 간결한 이름

문맥과 유효범위(Scope)에서 많은 정보를 얻을 수 있음. 변수의 유효범위가 넓을수록 이름에 더 많은 정보를 담아야 함. <u>반대로 이야기하면 이름을 지을 때 변수의 유효범위를 생각하며 지어야 함.</u>

#### 전역변수

- 이름만으로 목적을 이해할 수 있을정도로 길고 서술적이어도 괜찮음.
- 필요하다면 주석을 달아주는 것도 좋은 방법.

#### 지역변수

- 통상적인 용도로 사용되는 지역변수의 이름은 아주 짧아도 됨. (예: i, j, n, p, q, s, t 등)

코드의 명료성은 간결함을 통해 얻을 수 있는 경우가 많음.

이 외에도 상수를 선언하는 규칙이나 변수 이름에 타입 정보를 넣는 등 다양한 규칙이 있음. 이러한 규칙들 중 어떤 것을 따르는 것은 취향. **단, 세부적인 규칙의 내용보다 정해진 규칙을 일관되게 지키는 것이 훨씬 더 중요함.**

### 일관성을 지켜라

서로 관련있는 것들에는 연관된 이름을 붙여 상관관계를 보여줌과 동시에 그 차이점이 눈에 띄도록 함.

- 변수나 함수가 사용되는 문맥에 맞게 불필요한 요소를 제거
- 동일한 개념에는 하나의 용어만 사용

### 함수 이름은 능동형으로

함수 자체가 어떤 동작을 하는 것이므로 수동형보다 능동형이 맞을 듯.

```javascript
function moveDot() {}
function isMovedDot() {} // X
```

그리고 반환형이 모호하지 않은 이름을 사용해야 함.

```javascript
function checkString() {}
function isString() {}
```

### 정확한 이름을 써라

이름과 동작이 정확히 일치해야 함.

### 연습 1 - 1. 아래의 코드에서 이름과 값의 선택에 대해서 평가해보세요.

```c
// 일반적으로 사용되는 TRUE, FALSE 값과 반대로 되어있어서 혼란스러움.
#define TRUE 0
#define FALSE 1

if ((ch = getchar()) == EOF)
    // EOF 여부를 저장하는 변수라면 is_eof가 더 좋을 것 같음.
    not_eof = FALSE;
```

### 연습 1 - 2. 이 함수를 더 좋게 고쳐보세요.

```c
// 반환값이 참/거짓이므로 is_smaller가 더 잘 표현될 듯.
int smaller(char *s, char *t) {
    if (strcmp(s, t) < 1)
        return 1;
    else
        return 0;
}
```

### 이 코드를 소리 내어 읽어보세요.

```c
if ((falloc(SMRHSHSCRTCH, S_IFEXT|0644, MAXRODDHSH)) < 0)
    ...
```

못 읽음ㅋㅋ

## 표현식과 문장

제대로 동작하는 가장 명료한 코드를 쓸 것.

### 들여쓰기로 알아보기 쉬운 구조를 만들 것

조금 더 간결해지는 것 보다 읽기 쉬운 것이 중요함.

### 표현식을 자연스럽게

표현식을 입 밖으로 소리 내 말하는 것처럼 자연스럽게 쓸 것. 부정을 포함하는 조건식은 언제나 이해하기 힘듦.

### 괄호로 애매함을 해소

꼭 필요한 괄호가 아니더라도 가독성을 위해 넣어주면 좋음.

### 복잡한 표현은 잘게 쪼갤 것

한 문장 안에 다양한 연산자로 많은 것을 넣을 수 있으나, 그렇게되면 코드를 읽기 힘들어짐. 차라리 여러줄로 나눠 쓰는 것이 더 읽기 쉬움.

### 명료하게 쓸 것

> 프로그래밍의 목적은 분명 멋진 코드를 작성하는 것이 아니라 명료한 코드를 쓰는 것이다.<br/>
> 기준은 짧거나 긴 것이 아니라, 얼마나 코드를 이해하기 쉬운지가 되어야 함.

삼항연산자(?:)는 짧은 식에 적합함.

### 부수효과를 조심할 것

### 연습 1 - 4. 다음의 코드를 개선해 보자.

```c
if (!(c == 'y' || c == 'Y')) // if ((c != 'y') && (c != 'Y'))
    return;

length = (length < BUFSIZE) ? length : BUFSIZE;

flag = flag ? 0 : 1; // flag = !flag;

quote = (*line == '"') ? 1 : 0; // quote = *line == '"'

// bit = val & 1;
if (val & 1)
    bit = 1;
else
    bit = 0;
```

### 연습 1 - 5. 어느 부분이 잘못되었을까?

```c
int read(int *ip) {
    scanf("%d", ip);
    return *ip;
}
...
insert(&graph[vert], read(&val), read(&ch));
// 잘 모르겠...
```

### 연습 1 - 6. 계산 순서에 따라 이 코드의 결과로 나올 수 있는 여러 출력 값을 모두 나열해 보라.

```c
n = 1;
printf("%d %d\n", n++, n++);
// 1 1
// 3 3
// 1 2
// 2 3
```
